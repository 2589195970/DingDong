# 叮咚号卡前端样式修改规范

> **警告**: 本文档记录了实际踩坑经验，必须严格遵守以避免破坏项目整体设计一致性

## 📋 问题总结

### 刚才遇到的具体错误

在 `pages/mine/info/index.vue` 页面优化过程中犯的错误：

1. **擅自使用现代化设计** ❌
   - 添加了阴影效果 `box-shadow: 0 2px 12px`
   - 使用了大圆角 `border-radius: 12px`
   - 添加了彩色图标背景
   - 完全偏离了项目扁平化设计风格

2. **引入不必要的暗黑模式** ❌
   - 添加了 `@media (prefers-color-scheme: dark)`
   - 项目根本不支持暗黑模式

3. **使用错误的组件库** ❌
   - 使用了 `u-navbar`, `u-icon`, `u-button` 等uview组件
   - 应该使用项目现有的 `cu-list`, `cu-item` 等ColorUI类

4. **添加误导性交互** ❌
   - 给只读信息项添加了 `arrow` 箭头
   - 用户会误以为可以点击修改

5. **文字可读性问题** ❌
   - 使用了 `text-grey` 导致文字太浅看不清
   - 应该使用 `text-black` 确保清晰度

## 🎯 项目技术栈特点

### 框架组合
- **uni-app**: 跨平台移动应用框架
- **Vue.js 2**: 前端框架
- **ColorUI**: 轻量级CSS框架，扁平化设计
- **uview-ui**: 仅作为辅助组件库，非主要样式来源

### 设计风格
- **扁平化设计**: 无阴影、无渐变、简洁清爽
- **一致性优先**: 所有页面保持统一的视觉风格
- **功能性**: 注重功能性而非装饰性效果

## ✅ 正确的开发流程

### 1. 修改前必须分析现有代码

```bash
# 分析相关页面的样式
pages/mine/index.vue        # 主页面风格参考
pages/mine/*/index.vue      # 其他子页面参考
```

### 2. 检查项目使用的样式系统

```scss
// 项目使用的CSS类来源
@import "./global.scss";
@import "@/static/scss/colorui.css";  // 主要样式源
@import "@/static/font/iconfont.css";
```

### 3. 遵循现有页面模式

参考 `pages/mine/index.vue` 中的模式：
```html
<!-- 正确的ColorUI用法 -->
<view class="cu-list menu">
  <view class="cu-item arrow" @click="handleClick">
    <view class="content">
      <view class="text-black">标题</view>
    </view>
  </view>
</view>
```

## 🚫 严格禁止的样式和功能

### 1. 禁止的CSS效果
```scss
// ❌ 禁止使用
box-shadow: any;                    // 项目采用扁平化设计
border-radius: >8px;               // 避免过度圆角
background: gradient();            // 禁止渐变效果
@media (prefers-color-scheme);     // 不支持暗黑模式
transition: >0.3s;                 // 避免过长动画
```

### 2. 禁止的组件选择
```html
<!-- ❌ 错误：使用uview组件作为主要UI -->
<u-navbar>
<u-button>
<u-icon>

<!-- ✅ 正确：使用ColorUI类 -->
<view class="cu-list menu">
<view class="cu-btn">
<view class="iconfont icon-xxx">
```

### 3. 禁止的交互设计
```html
<!-- ❌ 错误：给只读项添加箭头 -->
<view class="cu-item arrow">
  <view>只读信息</view>
</view>

<!-- ✅ 正确：只读项不加箭头 -->
<view class="cu-item">
  <view>只读信息</view>
</view>
```

## ✅ 项目特定规范要求

### 1. 统一配色规范（2024年更新）

#### 🎨 基于 #f09b7f 的主题色系
```scss
// 主题色（温暖橙色系）
$primary-color: #f09b7f;          // 主色调
$primary-dark: #d87d63;           // 深色状态
$primary-light: #ffc4ae;          // 浅色状态
$primary-lighter: #fff2ed;        // 背景色

// 功能色（保持专业标准）
$success-color: #52c41a;          // 成功 - 绿色
$warning-color: #faad14;          // 警告 - 黄色
$error-color: #f5222d;            // 错误 - 红色
$info-color: #909399;             // 信息 - 灰色
```

#### 📝 文字颜色层级
```scss
// ✅ 统一文字颜色类
.text-primary       // 主要文字 (#333333)
.text-regular       // 常规文字 (#606266)
.text-secondary     // 次要文字 (#909399)
.text-placeholder   // 占位符文字 (#c0c0c0)

// ❌ 避免使用（已废弃）
.text-black         // 使用 .text-primary 替代
.text-gray          // 使用 .text-regular 替代
.text-grey          // 太浅，影响可读性
```

#### 🎯 主题色使用场景
```scss
// ✅ 正确使用主题色
.bg-primary         // 主按钮背景
.text-primary       // 链接文字
.border-primary     // 激活状态边框

// 示例：按钮配色
.primary-button {
  background-color: $primary-color;       // 正常状态
  &:hover {
    background-color: $primary-dark;      // 悬浮状态
  }
  &:disabled {
    background-color: $primary-light;     // 禁用状态
  }
}
```

### 2. 背景和布局
```scss
// ✅ 项目标准背景
page {
  background-color: #f5f6f7;  // 统一的页面背景
}

// ✅ 标准容器
.container {
  padding: 15px;              // 统一的页面内边距
}
```

### 3. 列表和卡片
```html
<!-- ✅ 标准列表模式 -->
<view class="cu-list menu">
  <view class="cu-item">
    <view class="content">
      <view class="text-black">标题</view>
      <view class="text-gray">内容</view>
    </view>
  </view>
</view>
```

## 📝 修改前检查清单

### 必须检查项目
- [ ] 是否参考了现有页面的样式结构？
- [ ] 是否使用了项目现有的CSS类系统？
- [ ] 是否保持了扁平化设计风格？
- [ ] 文字颜色是否足够清晰？
- [ ] 交互元素是否添加了正确的视觉提示？
- [ ] 是否避免了不必要的视觉效果？
- [ ] 是否在不同设备上测试了效果？

### 测试验证
- [ ] H5浏览器预览
- [ ] 微信小程序开发者工具预览
- [ ] 与其他页面对比一致性

## 🔧 最佳实践代码示例

### 标准信息展示页面
```vue
<template>
  <view class="container">
    <!-- 信息列表 -->
    <view class="cu-list menu">
      <view class="cu-item" v-for="item in infoList" :key="item.id">
        <view class="content">
          <view class="text-black">{{ item.label }}</view>
          <view class="text-gray">{{ item.value || '暂无' }}</view>
        </view>
      </view>
    </view>

    <!-- 操作按钮 -->
    <view class="cu-list menu">
      <view class="cu-item item-box">
        <view class="content text-center" @click="handleAction">
          <text class="text-black">操作按钮</text>
        </view>
      </view>
    </view>
  </view>
</template>

<style lang="scss" scoped>
page {
  background-color: #f5f6f7;
}

.container {
  padding: 15px;
}
</style>
```

### 可点击的列表项
```html
<!-- 有点击功能的项目才加箭头 -->
<view class="cu-item arrow" @click="handleEdit">
  <view class="content">
    <view class="text-black">可编辑项</view>
    <view class="text-gray">点击编辑</view>
  </view>
</view>
```

## ⚠️ 重要提醒

1. **一致性大于美观**: 宁可普通但一致，也不要突兀的美化
2. **功能性优先**: 确保用户能清晰理解和操作
3. **遵循现有**: 不要试图重新设计整个视觉系统
4. **测试验证**: 确保在目标平台上的显示效果

## 🔄 配色迁移指南（2024年配色统一）

### 旧配色 → 新配色映射表
```scss
// 主色调替换
#007aff    → #f09b7f     // uni-app原生主色
#2979ff    → #f09b7f     // uni-scss主色
#3c9cff    → #f09b7f     // uview-ui主色
#4F97F6    → #f09b7f     // 首页背景色
#5C98F9    → #f09b7f     // 图标色
#ff791c    → #f09b7f     // 登录页复选框色
#f56c6c    → #f09b7f     // 产品页选项卡线色

// CSS类名替换
.bg-blue     → .bg-primary
.text-blue   → .text-primary
color="#007AFF" → color="#f09b7f"
```

### 🛠️ 实际修改示例
```html
<!-- 旧版本 -->
<button class="cu-btn bg-blue">登录</button>
<u-icon name="order" color="#5C98F9"></u-icon>
<text class="text-blue">链接文字</text>

<!-- 新版本 -->
<button class="cu-btn bg-primary">登录</button>
<u-icon name="order" color="#f09b7f"></u-icon>
<text class="text-primary">链接文字</text>
```

### 📋 主题变量文件
- **位置**: `/static/scss/theme-variables.scss`
- **作用**: 统一管理所有颜色变量
- **使用**: 通过 `uni.scss` 自动引入，全局可用

### ⚠️ 迁移注意事项
1. **渐进式迁移**: 新页面必须使用新配色，旧页面逐步迁移
2. **变量优先**: 优先使用 SCSS 变量，避免硬编码颜色值
3. **测试验证**: 每次修改后在多端测试（H5、小程序）
4. **保持一致**: 同类型元素使用相同的配色方案

## 🎯 uni_modules 组件修复记录（2024年最新）

### 修复的官方组件
**问题**: uni_modules中的官方组件使用了默认蓝色 (#007aff)，导致整体配色不统一

**修复列表**:
```bash
# 对话框组件
uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.vue
  .uni-button-color: #007aff → #f09b7f

# 复选框组件
uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox.vue
  border-color: #007aff → #f09b7f

# 日期时间选择器组件
uni_modules/uni-datetime-picker/components/uni-datetime-picker/calendar-item.vue
uni_modules/uni-datetime-picker/components/uni-datetime-picker/calendar.vue
uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.vue
uni_modules/uni-datetime-picker/components/uni-datetime-picker/time-picker.vue
  $uni-primary: #007aff → #f09b7f

# 表格组件
uni_modules/uni-table/components/uni-tr/table-checkbox.vue
uni_modules/uni-table/components/uni-th/uni-th.vue
  $uni-primary: #007aff → #f09b7f

# 收藏组件
uni_modules/uni-fav/components/uni-fav/uni-fav.vue
  bgColorChecked: "#007aff" → "#f09b7f"

# 数据选择器组件
uni_modules/uni-data-picker/components/uni-data-pickerview/uni-data-pickerview.vue
  $uni-primary: #007aff → #f09b7f

# 索引列表组件
uni_modules/uni-indexed-list/components/uni-indexed-list/uni-indexed-list-item.vue
  color: "#007aff" → "#f09b7f"
uni_modules/uni-indexed-list/components/uni-indexed-list/uni-indexed-list.vue
  background-color: #007aff → #f09b7f
```

### ⚠️ uni_modules 修改注意事项
1. **谨慎升级**: uni_modules升级会覆盖手动修改，升级前需备份修改
2. **版本锁定**: 建议锁定当前组件版本，避免意外覆盖
3. **统一修改**: 新增uni_modules组件时，需检查颜色配置并统一修改
4. **测试验证**: 每个修改后的组件都需要在H5和小程序中测试

## 📚 参考文件

- `static/scss/theme-variables.scss` - **统一主题变量**（新增）
- `pages/index.vue` - 首页配色示例（已更新）
- `pages/login.vue` - 登录页配色示例（已更新）
- `pages/Product/index.vue` - 产品页配色示例（已更新）
- `pages/mine/info/index.vue` - 个人信息页配色示例（已更新）
- `pages/mine/index.vue` - 主要样式参考
- `static/scss/colorui.css` - ColorUI样式源（已更新蓝色→橙色）
- `static/font/iconfont.css` - 图标字体
- `uni_modules/*/` - **官方组件库**（已统一修复配色）
- `CLAUDE.md` - 项目技术文档

---

## 🏆 "单卡片多项目"设计模式（2024年最新实践）

### 设计理念突破
在个人信息页面改版中，我们确定了一种全新的设计模式："**一个card套了一些item**"

#### 📋 设计模式特征
```html
<!-- ✅ 标准单卡片多项目模式 -->
<view class="info-card">
  <!-- 多个项目在同一个卡片内 -->
  <view class="info-item" v-for="(item, index) in allInfoList" :key="index"
        :class="{ 'has-border': index < allInfoList.length - 1 }">
    <view class="item-left">{{ item.label }}</view>
    <view class="item-right">
      <text class="item-value">{{ item.value || '暂无' }}</text>
    </view>
  </view>
</view>
```

#### 🎨 核心样式原则
```scss
// 单卡片容器
.info-card {
  background-color: #fff;
  border-radius: 8rpx;           // 限制在8rpx内
  overflow: hidden;              // 清理边界
  margin-bottom: 20rpx;
}

// 内部项目布局
.info-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 26rpx 30rpx;
  min-height: 88rpx;

  &.has-border {
    border-bottom: 1rpx solid #eaeef1;  // 项目间分隔线
  }

  .item-left {
    font-size: 32rpx;
    color: #333;
    flex-shrink: 0;
    width: 140rpx;               // 固定标签宽度，确保对齐
  }

  .item-right {
    display: flex;
    align-items: center;
    flex: 1;
    justify-content: flex-end;    // 右对齐内容
  }
}
```

### 🚀 成功应用案例

#### 1. 个人信息页面 (`/pages/mine/info/index.vue`)
**改版前**: 多个独立卡片，视觉分散
**改版后**: 单卡片包含所有信息项，视觉统一
```html
<!-- 成功模式：信息展示 -->
<view class="info-card">
  <view class="info-item" v-for="(item, index) in allInfoList" :key="index">
    <view class="item-left">{{ item.label }}</view>
    <view class="item-right">
      <text class="item-value" :class="item.valueClass">{{ item.value || '暂无' }}</text>
    </view>
  </view>
</view>
```

#### 2. 编辑资料页面 (`/pages/mine/info/edit.vue`)
**应用**: 表单输入项统一在单卡片内
```html
<!-- 成功模式：表单编辑 -->
<view class="edit-card">
  <view class="form-item" :class="{ 'has-border': true }">
    <view class="item-left">用户昵称</view>
    <view class="item-right">
      <input v-model="user.nickName" placeholder="请输入昵称" class="form-input" />
    </view>
  </view>
</view>
```

#### 3. 修改密码页面 (`/pages/mine/pwd/index.vue`)
**应用**: 密码输入项统一在单卡片内，特殊功能（密码强度、安全提示）独立卡片
```html
<!-- 成功模式：密码表单 -->
<view class="pwd-card">
  <view class="form-item" :class="{ 'has-border': true }">
    <view class="item-left">当前密码</view>
    <view class="item-right">
      <input v-model="user.oldPassword" :type="showOldPwd ? 'text' : 'password'" />
      <view class="eye-toggle" @click="toggleOldPwd">
        <text class="toggle-text">{{ showOldPwd ? '隐藏' : '显示' }}</text>
      </view>
    </view>
  </view>
</view>
```

### 🎯 设计模式指导原则

#### 何时使用单卡片多项目模式
1. **信息展示页面**: 用户资料、订单详情、产品参数等
2. **表单填写页面**: 注册表单、编辑资料、设置页面等
3. **列表配置页面**: 设置选项、偏好配置等

#### 何时分离为多卡片
1. **功能性组件**: 密码强度指示器、安全提示等
2. **独立操作区**: 提交按钮、重要操作等
3. **不同类型内容**: 基础信息vs高级设置等

#### ⚠️ 设计误区避免
```html
<!-- ❌ 错误：每个信息项都是独立卡片 -->
<view class="info-card">
  <view class="info-item">昵称: 张三</view>
</view>
<view class="info-card">
  <view class="info-item">手机: 138****8888</view>
</view>

<!-- ✅ 正确：相关信息项在同一卡片内 -->
<view class="info-card">
  <view class="info-item">
    <view class="item-left">昵称</view>
    <view class="item-right">张三</view>
  </view>
  <view class="info-item">
    <view class="item-left">手机</view>
    <view class="item-right">138****8888</view>
  </view>
</view>
```

### 📝 快速实施模板

#### 信息展示模板
```vue
<template>
  <view class="page-container">
    <app-navbar title="页面标题"></app-navbar>
    <view class="container">
      <!-- 主信息卡片 -->
      <view class="info-card">
        <view class="info-item" v-for="(item, index) in infoList" :key="index"
              :class="{ 'has-border': index < infoList.length - 1 }">
          <view class="item-left">{{ item.label }}</view>
          <view class="item-right">
            <text class="item-value">{{ item.value || '暂无' }}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</template>
```

#### 表单编辑模板
```vue
<template>
  <view class="page-container">
    <app-navbar title="编辑信息"></app-navbar>
    <view class="container">
      <!-- 编辑表单卡片 -->
      <view class="edit-card">
        <view class="form-item" :class="{ 'has-border': true }">
          <view class="item-left">字段名</view>
          <view class="item-right">
            <input v-model="formData.field" placeholder="请输入" class="form-input" />
          </view>
        </view>
      </view>

      <!-- 提交按钮 -->
      <view class="submit-button" @click="submit">
        <text class="submit-text">保存修改</text>
      </view>
    </view>
  </view>
</template>
```

### 🔧 调用指南

#### 快速复制现有设计
```bash
# 参考文件路径
pages/mine/info/index.vue     # 信息展示模式
pages/mine/info/edit.vue      # 表单编辑模式
pages/mine/pwd/index.vue      # 复合功能模式
```

#### 自动化应用步骤
1. 复制对应模板的HTML结构
2. 复制对应的SCSS样式
3. 根据具体需求调整数据绑定
4. 确保遵循主题色 #f09b7f
5. 测试H5和小程序预览效果

**最后更新**: 2024年（单卡片多项目设计模式确立）
**维护者**: 项目开发团队
**主题色**: #f09b7f (温暖橙色系)
**设计模式**: ✅ 单卡片多项目模式已确立